<!DOCTYPE html>
<html>
<head>
  <title>Profile - Foroom</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
<div class="container" id="profile"></div>
<script src="js/api.js"></script>
<script>
const urlParams = new URLSearchParams(window.location.search);
const username = urlParams.get('user');
window.onload = () => {
  api("/users/"+username).then(u => {
    document.getElementById("profile").innerHTML = `
      <h2>${u.username}</h2>
      <p>Joined: ${new Date(u.join_date).toLocaleDateString()}</p>
      <p>Last Online: ${new Date(u.last_online).toLocaleString()}</p>
      <div>
        Badges: ${(JSON.parse(u.badges||"[]")||[]).map(b => `<span class="profile-badge">${b}</span>`).join(' ')}
      </div>
      <a href="messages.html?to=${u.username}">Send Message</a>
    `;
  });
};
</script>
</body>
</html>
