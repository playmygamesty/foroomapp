<!DOCTYPE html>
<html>
<head>
  <title>Sign up â€“ Foroom</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
<div class="container">
  <h2>Sign up</h2>
  <form onsubmit="return signup()">
    <input id="username" placeholder="Username" required /><br>
    <input id="password" type="password" placeholder="Password" required /><br>
    <button type="submit">Create account</button>
  </form>
  <div id="msg"></div>
</div>
<script src="js/api.js"></script>
<script>
function signup() {
  api("/signup", "POST", {username: username.value, password: password.value})
    .then(res => {
      if (res.token) { setToken(res.token); location.href = "index.html"; }
      else if (res.ok) { document.getElementById("msg").innerText = "Account created, please log in."; }
      else if (res.error) { document.getElementById("msg").innerText = res.error; }
      else { document.getElementById("msg").innerText = "Account creation failed"; }
    });
  return false;
}
</script>
</body>
</html>
